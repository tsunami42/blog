<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
     
    <title>My Site For Everything  | Dep使用记录</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
     <meta name="generator" content="Hugo 0.26-DEV" />
      
      
        <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
      

     <link href='https://tsunami42.github.io/blog/dist/main.css' rel='stylesheet' type="text/css" />

     

      <meta property="og:title" content="Dep使用记录" />
<meta property="og:description" content="dep介绍 今年GopherCon刚好有两个关于dep的talk
 The New Era of Go Package Management go dep in 10 minutes  使用方法 $ dep init  初始化项目，会先从已有的包管理读取配置依赖信息（glide &amp; godep），备份当前的vendor/然后生成相应的文件 Gopkg.toml 与Gopkg.lock，最后将依赖安装到vendor/目录下
$ dep ensure  保证vendor/目录下的依赖符合Gopkg.toml与Gopkg.lock中的配置，如果没有就创建目录
使用时的坑 我的项目有两个依赖：
 github.com/influxdata/influxdb@v1.0.0
 github.com/Shopify/sarama@v1.12.0
  原先是通过gdm来直接保存和修改GOPATH中包的版本信息，没有使用vendor的功能，所有的信息都直接从src目录下代码的版本号获得
在执行dep init后， Gopkg.toml里influxdb的依赖一直不对，一直是当前最大的tag，v1.3.1，多次尝试后，通过dep help init找到了答案
$ dep help init ... By default, the dependencies are resolved over the network. A version will be selected from the versions available from the upstream source per the following algorithm: - Tags conforming to semver (sorted by semver rules) - Default branch(es) (sorted lexicographically) - Non-semver tags (sorted lexicographically) An alternate mode can be activated by passing -gopath." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://tsunami42.github.io/blog/posts/dep-usage/" />



<meta property="article:published_time" content="2017-08-04T23:35:01&#43;08:00"/>
<meta property="article:modified_time" content="2017-08-04T23:35:01&#43;08:00"/>











<meta itemprop="name" content="Dep使用记录">
<meta itemprop="description" content="dep介绍 今年GopherCon刚好有两个关于dep的talk
 The New Era of Go Package Management go dep in 10 minutes  使用方法 $ dep init  初始化项目，会先从已有的包管理读取配置依赖信息（glide &amp; godep），备份当前的vendor/然后生成相应的文件 Gopkg.toml 与Gopkg.lock，最后将依赖安装到vendor/目录下
$ dep ensure  保证vendor/目录下的依赖符合Gopkg.toml与Gopkg.lock中的配置，如果没有就创建目录
使用时的坑 我的项目有两个依赖：
 github.com/influxdata/influxdb@v1.0.0
 github.com/Shopify/sarama@v1.12.0
  原先是通过gdm来直接保存和修改GOPATH中包的版本信息，没有使用vendor的功能，所有的信息都直接从src目录下代码的版本号获得
在执行dep init后， Gopkg.toml里influxdb的依赖一直不对，一直是当前最大的tag，v1.3.1，多次尝试后，通过dep help init找到了答案
$ dep help init ... By default, the dependencies are resolved over the network. A version will be selected from the versions available from the upstream source per the following algorithm: - Tags conforming to semver (sorted by semver rules) - Default branch(es) (sorted lexicographically) - Non-semver tags (sorted lexicographically) An alternate mode can be activated by passing -gopath.">


<meta itemprop="dateModified" content="2017-08-04T23:35:01&#43;08:00" />
<meta itemprop="wordCount" content="136">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Dep使用记录"/>
<meta name="twitter:description" content="dep介绍 今年GopherCon刚好有两个关于dep的talk
 The New Era of Go Package Management go dep in 10 minutes  使用方法 $ dep init  初始化项目，会先从已有的包管理读取配置依赖信息（glide &amp; godep），备份当前的vendor/然后生成相应的文件 Gopkg.toml 与Gopkg.lock，最后将依赖安装到vendor/目录下
$ dep ensure  保证vendor/目录下的依赖符合Gopkg.toml与Gopkg.lock中的配置，如果没有就创建目录
使用时的坑 我的项目有两个依赖：
 github.com/influxdata/influxdb@v1.0.0
 github.com/Shopify/sarama@v1.12.0
  原先是通过gdm来直接保存和修改GOPATH中包的版本信息，没有使用vendor的功能，所有的信息都直接从src目录下代码的版本号获得
在执行dep init后， Gopkg.toml里influxdb的依赖一直不对，一直是当前最大的tag，v1.3.1，多次尝试后，通过dep help init找到了答案
$ dep help init ... By default, the dependencies are resolved over the network. A version will be selected from the versions available from the upstream source per the following algorithm: - Tags conforming to semver (sorted by semver rules) - Default branch(es) (sorted lexicographically) - Non-semver tags (sorted lexicographically) An alternate mode can be activated by passing -gopath."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://tsunami42.github.io/blog" class="f3 fw2 hover-white no-underline white-90 dib">
      My Site For Everything
    </a>
    <div class="flex-l items-center">
      
      






    </div>
  </div>
</nav>

    </div>
  </header>


    <main class="pb7" role="main">
      
  <div class="flex-l mt2 mw8 center">
    <article class="center cf pv5 ph3 ph4-ns mw7">
      <header>
        <p class="f6 b helvetica tracked">
          POSTS
        </p>
        <h1 class="f1">
          Dep使用记录
        </h1>
      </header>
      <div class="nested-copy-line-height lh-copy f4 nested-links nested-img mid-gray">
        

<h1 id="dep介绍">dep介绍</h1>

<p>今年GopherCon刚好有两个关于dep的talk</p>

<ul>
<li><a href="https://www.youtube.com/watch?v=5LtMb090AZI&amp;list=PL2ntRZ1ySWBdD9bru6IR-_WXUgJqvrtx9&amp;index=18">The New Era of Go Package Management</a></li>
<li><a href="https://www.youtube.com/watch?v=eZwR8qr2BfI&amp;list=PL2ntRZ1ySWBfhRZj3BDOrKdHzoafHsKHU&amp;index=16">go dep in 10 minutes</a></li>
</ul>

<h1 id="使用方法">使用方法</h1>

<pre><code class="language-shell">$ dep init
</code></pre>

<p>初始化项目，会先从已有的包管理读取配置依赖信息（<code>glide</code> &amp; <code>godep</code>），备份当前的<code>vendor/</code>然后生成相应的文件 <a href="https://github.com/golang/dep/blob/master/docs/Gopkg.toml.md"><code>Gopkg.toml</code></a> 与<code>Gopkg.lock</code>，最后将依赖安装到<code>vendor/</code>目录下</p>

<pre><code class="language-shell">$ dep ensure
</code></pre>

<p>保证<code>vendor/</code>目录下的依赖符合<code>Gopkg.toml</code>与<code>Gopkg.lock</code>中的配置，如果没有就创建目录</p>

<h1 id="使用时的坑">使用时的坑</h1>

<p>我的项目有两个依赖：</p>

<ul>
<li><code>github.com/influxdata/influxdb@v1.0.0</code><br /></li>
<li><code>github.com/Shopify/sarama@v1.12.0</code><br /></li>
</ul>

<p>原先是通过gdm来直接保存和修改GOPATH中包的版本信息，没有使用vendor的功能，所有的信息都直接从src目录下代码的版本号获得</p>

<p>在执行<code>dep init</code>后， <code>Gopkg.toml</code>里influxdb的依赖一直不对，一直是当前最大的tag，v1.3.1，多次尝试后，通过<code>dep help init</code>找到了答案</p>

<pre><code>$ dep help init
...
By default, the dependencies are resolved over the network. A version will be
selected from the versions available from the upstream source per the following
algorithm:
 - Tags conforming to semver (sorted by semver rules)
 - Default branch(es) (sorted lexicographically)
 - Non-semver tags (sorted lexicographically)
An alternate mode can be activated by passing -gopath. In this mode, the version
of each dependency will reflect the current state of the GOPATH. If a dependency
doesn't exist in the GOPATH, a version will be selected based on the above
network version selection algorithm.
...
</code></pre>

<p>默认情况下，<code>dep init</code>是直接从网上获取版本信息，只有指定了<code>-gopath</code>，才是从当前的GOPATH中获取。</p>

      </div>
    </article>
    <aside class="ph3 mt2 mt6-ns">
      







  <div class="bg-light-gray pa3">
    <ul>
      <li class="list b mb3">
        2 More Posts
      </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/blog/posts/dep-usage/" class="link ph2 pv2 db black o-50">
            Dep使用记录
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/blog/posts/guide-to-syscalls/" class="link ph2 pv2 db black">
            Guide To Syscalls
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/blog/posts/my-first-post/" class="link ph2 pv2 db black">
            My First Post
          </a>
        </li>
      
    </ul>
  </div>


    </aside>
  </div>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://tsunami42.github.io/blog" >
    &copy; 2017 My Site For Everything
  </a>
  






  </div>
</footer>

    <script src="https://tsunami42.github.io/blog/dist/app.bundle.js" async></script>

  </body>
</html>
