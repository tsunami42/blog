<!DOCTYPE html>
<html lang="en-us">

    <head>

        <title>Go Dep In 10min</title>

        <style>

    html body {
        font-family: Noto Sans, sans-serif;
        background-color: white;
    }

    :root {
        --accent: black;
        --border-width:  5px ;
    }

</style>


<link rel="stylesheet" href="https://tsunami42.github.io/blog/css/main.css">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto%20Sans">


 <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"> 


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
 


    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

     <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/shell.min.js"></script>  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/toml.min.js"></script> 

    <script>hljs.initHighlightingOnLoad();</script>







<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
 <meta name="generator" content="Hugo 0.25.1" />

        <meta charset="utf-8">

        <meta name="viewport" content="width=device-width, initial-scale=1">

    </head>

    <body>

        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">

                <div class="navbar-header">

                    <a class="navbar-brand visible-xs" href="#">Go Dep In 10min</a>

                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                </div>

                <div class="collapse navbar-collapse">

                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="https://tsunami42.github.io/blog/">Home</a></li>
                            
                                <li><a href="https://tsunami42.github.io/blog/posts/">Posts</a></li>
                            
                        </ul>
                    

                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="https://github.com/tsunami42/"><i class="fa fa-github"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://twitter.com/_Tsunami_42_/"><i class="fa fa-twitter"></i></a></li>
                            
                        </ul>
                    

                </div>

            </div>

        </nav>


<main>

    <div class="item">

    
    

    
    

    <h4><a href="https://tsunami42.github.io/blog/posts/go-dep-in-10min/">Go Dep In 10min</a></h4>
    <h5>August 7, 2017</h5>
     <kbd class="item-tag">talk</kbd>  <kbd class="item-tag">Go</kbd> 

</div>


    <br> <div class="text-justify">


<div style="position: relative; padding-bottom: 56.25%; padding-top: 30px; height: 0; overflow: hidden;">
  <iframe src="//www.youtube.com/embed/eZwR8qr2BfI" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen frameborder="0"></iframe>
 </div>


<h3 id="manifest-gopkg-toml">Manifest - Gopkg.toml</h3>

<p>用户自行维护</p>

<pre><code class="language-toml">[[constraint]]
    name = &quot;github.com/sdboyer/deptest&quot;
    source = &quot;http://github.com/carolynvs/deptest&quot;
    version = &quot;0.8.0&quot;

[[constraint]]
    branch = &quot;master&quot;
    name = &quot;github.com/pkg/errors&quot;
</code></pre>

<p>根据semver指定版本</p>

<h3 id="lock-gopkg-lock">Lock - Gopkg.lock</h3>

<pre><code class="language-toml">[[projects]]
  name = &quot;github.com/sdboyer/deptest&quot;
  revision = &quot;ff2948a2ac8f538c4ecd55962e919d1e13e74baf&quot;
  version = &quot;v0.8.1&quot;

[[projects]]
  name = &quot;github.com/pkg/errors&quot;
  revision = &quot;17b591df37844cde689f4d5813e5cea0927d8dd2&quot;
  version = &quot;v0.7.1&quot;
</code></pre>

<h3 id="0-8-0-和-v0-8-1">0.8.0 和 v0.8.1 ？</h3>

<p>dep希望大家有使用semver的规范来管理release，默认指代一个版本范围</p>

<pre><code>1.2.3 becomes &gt;=1.2.3, &lt;2.0.0
0.2.3 becomes &gt;=0.2.3, &lt;0.3.0
0.0.3 becomes &gt;=0.0.3, &lt;0.1.0
 
Use =0.8.1 to pin to a version
</code></pre>

<h3 id="一些命令">一些命令</h3>

<h4 id="dep-init">dep init</h4>

<ul>
<li>使用其他的包管理：会想办法自动迁移<br /></li>
<li>GOPATH就是当前的依赖：dep init -gopath<br /></li>
<li>已经用了vendoer：先备份，在根据vendor更新<br />
<br /></li>
</ul>

<h4 id="dep-ensure">dep ensure</h4>

<p>初始化 vendor &amp; 在manifest修改之后</p>

<h4 id="dep-status">dep status</h4>

<pre><code>PROJECT                             CONSTRAINT     VERSION        REVISION  LATEST
github.com/Masterminds/semver       branch 2.x     branch 2.x     139cc09   c2e7f6c
github.com/Masterminds/vcs          ^1.11.0        v1.11.1        3084677   3084677
github.com/armon/go-radix           *              branch master  4239b77   4239b77
</code></pre>

<h3 id="依赖修改">依赖修改</h3>

<ul>
<li>增加依赖：代码里增加import，dep ensure<br /></li>
<li>删除依赖：删除import的代码，dep ensure，手动从manifest中删除<br /></li>
<li>测试还没提交的依赖修改：从vendor中移除，不要执行dep ensure，在GOPATH中修改依赖<br />
<br /></li>
</ul>

<h3 id="floor-is-lava">Floor is Lava</h3>

<p>配置文件的格式不会变，dep init可以用，PR里有大新闻</p>

<h3 id="相关链接">相关链接</h3>

<p><a href="https://github.com/golang/dep" target="_blank">https://github.com/golang/dep</a><br />
<a href="https://github.com/Masterminds/semver" target="_blank">https://github.com/Masterminds/semver</a><br />
<a href="http://carolynvs.com/dep-in-10" target="_blank">http://carolynvs.com/dep-in-10</a></p>
</div>

    
    

    

</main>



        <footer>

            <p class="copyright text-muted">&copy; All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a>.</p>

        </footer>

    </body>

</html>

