<!DOCTYPE html>
<html lang="en-us">

    <head>

        <title>Hugo Notes</title>

        <style>

    html body {
        font-family: Noto Sans, sans-serif;
        background-color: white;
    }

    :root {
        --accent: black;
        --border-width:  5px ;
    }

</style>


<link rel="stylesheet" href="https://tsunami42.github.io/blog/css/main.css">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto%20Sans">


 <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"> 


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
 


    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

     <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/shell.min.js"></script>  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/toml.min.js"></script> 

    <script>hljs.initHighlightingOnLoad();</script>







<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
 <meta name="generator" content="Hugo 0.25.1" />

        <meta charset="utf-8">

        <meta name="viewport" content="width=device-width, initial-scale=1">

    </head>

    <body>

        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">

                <div class="navbar-header">

                    <a class="navbar-brand visible-xs" href="#">Hugo Notes</a>

                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                </div>

                <div class="collapse navbar-collapse">

                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="https://tsunami42.github.io/blog/">Home</a></li>
                            
                                <li><a href="https://tsunami42.github.io/blog/posts/">Posts</a></li>
                            
                        </ul>
                    

                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="https://github.com/tsunami42/"><i class="fa fa-github"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://twitter.com/_Tsunami_42_/"><i class="fa fa-twitter"></i></a></li>
                            
                        </ul>
                    

                </div>

            </div>

        </nav>


<main>

    <div class="item">

    
    

    
    

    <h4><a href="https://tsunami42.github.io/blog/posts/hugo-notes/">Hugo Notes</a></h4>
    <h5>August 5, 2017</h5>
     <kbd class="item-tag">note</kbd> 

</div>


    <br> <div class="text-justify">

<h1 id="安装-初始化">安装 &amp; 初始化</h1>

<p><a href="https://gohugo.io/getting-started/installing" target="_blank">https://gohugo.io/getting-started/installing</a></p>

<h2 id="安装">安装</h2>

<p>Gopher当然是直接从源码安装了</p>

<pre><code>go get github.com/kardianos/govendor
govendor get github.com/gohugoio/hugo
go install github.com/gohugoio/hugo
</code></pre>

<h2 id="初始化">初始化</h2>

<h3 id="目录结构初始化">目录结构初始化</h3>

<pre><code>hugo new site blog
</code></pre>

<h3 id="设置主题">设置主题</h3>

<pre><code>cd blog;
git init;
git submodule add https://github.com/budparr/gohugo-theme-ananke.git themes/ananke;

# 编辑config.toml配置文件，增加主题配置
echo 'theme = &quot;ananke&quot;' &gt;&gt; config.toml
</code></pre>

<p>文档上的默认主题是这个，考虑换一个</p>

<h1 id="部署到github">部署到github</h1>

<p><a href="https://help.github.com/articles/user-organization-and-project-pages/" target="_blank">github page介绍</a></p>

<h2 id="新建项目">新建项目</h2>

<p>在github上新建项目，页面访问链接： <code>username.github.io/projectname</code></p>

<h2 id="第一篇文章">第一篇文章</h2>

<pre><code># 新建模板文件
hugo new posts/my-first-post.md

# 随便写点啥

# 本地浏览器预览
hugo server -D
</code></pre>

<p>到目前为止，页面已经可以预览，接下来是发布工作</p>

<h2 id="部署实践">部署实践</h2>

<h3 id="准备工作">准备工作</h3>

<p>首先修改 <code>config.toml</code> 中的 <code>baseURL</code> 字段为</p>

<pre><code>baseURL = &quot;https://username.github.io/projectname&quot;
</code></pre>

<p>然后是将 <code>posts/my-first-post.md</code> 中开头的 <code>draft: true</code> 改成 <code>false</code></p>

<h3 id="推送">推送</h3>

<p>github pages的部署方式有好几种，我选择将生成的静态文件放到 <code>gh-pages</code> 目录中</p>

<p><a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/#deployment-from-your-gh-pages-branch" target="_blank">查看文档</a></p>

<h3 id="注意事项">注意事项</h3>

<ul>
<li>因为github是全站https开启的， <code>baseURL</code> 一定要是 <code>https</code> 开头，不然会有资源加载的问题<br /></li>
<li>运行 <code>hugo</code> 命令会生成静态文件，默认生成的静态文件会放到 <code>public</code> 目录下<br />
<br /></li>
</ul>

<h2 id="自动刷新的坑">自动刷新的坑</h2>

<p>修改页面，推送到<code>gh-pages</code> 分支上去之后，等了半天页面不会自动刷新，搜了一下，是时区问题。</p>

<p>根据jekyll的配置，在public目录下增加 <code>_config.yml</code>文件，指定时区就完美解决。</p>

<pre><code class="language-shell">$ cat public/_config.yml
timezone: Asia/Shanghai
</code></pre>

<p>相关链接：<a href="https://stackoverflow.com/questions/20422279/github-pages-are-not-updating" target="_blank">https://stackoverflow.com/questions/20422279/github-pages-are-not-updating</a></p>
</div>

    
    

    

</main>



        <footer>

            <p class="copyright text-muted">&copy; All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a>.</p>

        </footer>

    </body>

</html>

